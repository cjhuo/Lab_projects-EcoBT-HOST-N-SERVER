
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>GMAP API Test</title>
    <link href="https://developers.google.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="http://maps.google.com/maps/api/js?sensor=true&language=en"></script>
    
    <script language="javascript" type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/src/infobubble.js"></script>

		<script type="text/javascript" src="http://demo-ee.com/assets/js/google_maps/infobox.js"></script>

<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="http://people.iola.dk/olau/flot/excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="http://people.iola.dk/olau/flot/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="http://people.iola.dk/olau/flot/jquery.flot.js"></script>
    <script>
      var geocoder;
      var map;
      var infowindow = new google.maps.InfoWindow();
      var infobox = new InfoBox({
      	boxClass: 'info-windows'
      	});     
      //var infoBubble = new InfoBubble();
      
      var marker;
      var latlng;
      function initialize() {
        geocoder = new google.maps.Geocoder();
        latlng = new google.maps.LatLng(33.643751, -117.841008);
        var mapOptions = {
          zoom: 18,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.HYBRID
        }
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
        
        marker = new google.maps.Marker({
          map:map,
          draggable:false,
          animation: google.maps.Animation.DROP,
          position: latlng
        });
        google.maps.event.addListener(marker, 'click', showInfo);       
      }

	    function getRandomData() {
	    		var data = [], totalPoints = 300;
	        if (data.length > 0)
	            data = data.slice(1);
	
	        // do a random walk
	        while (data.length < totalPoints) {
	            var prev = data.length > 0 ? data[data.length - 1] : 50;
	            var y = prev + Math.random() * 10 - 5;
	            if (y < 0)
	                y = 0;
	            if (y > 100)
	                y = 100;
	            data.push(y);
	        }
	
	        // zip the generated y values with the x values
	        var res = [];
	        for (var i = 0; i < data.length; ++i)
	            res.push([i, data[i]])
	        return res;
	    }  
	          
      function showInfo() {

		var div = document.createElement('DIV');
		div.style.cssText = 'background: white;width:600px;height:300px;';
			
		// setup plot
		var options = {
	        	series: { shadowSize: 0 }, // drawing is faster without shadows
	        	yaxis: { position: "right", min: 0, max: 100 },
	        	xaxis: { show: true }
		};					
			    
		var plot = $.plot(div, [ getRandomData() ], options);
	      		
		infowindow.setContent(div);
		infowindow.open(map, marker);
					
		//infobox.setContent(div);
		//infobox.open(map,marker);
      }

    </script>
  </head>
  <body onload="initialize()">

    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html>
